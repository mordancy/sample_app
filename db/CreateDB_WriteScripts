require 'sqlite3'

File.delete("eim_dump.db") if File::exists?( "eim_dump.db" )

# Open a SQLite 3 database file
db = SQLite3::Database.new "eim_dump.db"
#SQLite3::Database.new 'entitlements.db'
#db = SQLite3::Database.open 'entitlements.db'

puts "SELECT SQLITE_VERSION <#{db.get_first_value 'SELECT SQLITE_VERSION()'}>"

# Create a table
sql = <<SQL
CREATE TABLE IF NOT EXISTS tablenames (
TBL_ID       INTEGER,
TABLE_NAMES  VARCHAR(20)
);

CREATE TABLE IF NOT EXISTS filednames (
TBL_ID       INTEGER,
FIELD_ID     INTEGER PRIMARY KEY AUTOINCREMENT,
FIELD_NAMES  VARCHAR(20),
FIELD_TYPE   VARCHAR(20)
--format date fields, translate charachter fields. replace commas, newlines, carriage returns with space. 
);

CREATE TABLE IF NOT EXISTS dbfilednames (
TBL_ID       INTEGER,
FIELD_ID     INTEGER PRIMARY KEY AUTOINCREMENT,
FIELD_NAMES  VARCHAR(20) ,
FIELD_TYPE   VARCHAR(20)
);


SQL

db.execute_batch( sql )



# Create a table
#result = db.execute <<-SQL
#  CREATE TABLE numbers (
#    name VARCHAR(30),
#    val INT
#  );
#SQL

# Insert some data into it
#{ 'one' => 1, 'two' => 2 }.each do |pair|
#  db.execute 'insert into numbers values (?, ?)', pair
#end

# Find some records
#db.execute 'SELECT * FROM numbers' do |row|
#  p row
#end


=begin



accountrestrictions
USERGROUP,BANKCODE,ACCOUNTNUM,PRODUCTCODE,FUNCTIONCODE,TYPECODE,ACTIONMODE,RESTRICTIONTYPE,RESTRICTIONCOLUMN,DEPENDENCYCOLUMN1,DEPENDENCYCOLUMN2,DEPENDENCYCOLUMN3,VALUE1,VALUE2,ACTIONTIMESTAMP,PROCESSORDER

accountrestrictionsmaint
USERGROUP,BANKCODE,ACCOUNTNUM,PRODUCTCODE,FUNCTIONCODE,TYPECODE,ACTIONMODE,RESTRICTIONTYPE,RESTRICTIONCOLUMN,DEPENDENCYCOLUMN1,DEPENDENCYCOLUMN2,DEPENDENCYCOLUMN3,VALUE1,VALUE2,ACTIONTIMESTAMP,PROCESSORDER

ach_compinfo
ID,USERGROUP,PARENTUSERGROUP,COMPANYID,COMPNAME,COMPDISCDATA,COMPFULLNAME,ORIGBANKCODE,ORIGACHABA,ORIGBANKNAME,OFFSETACCOUNTNUM,OFFSETACHABA,OFFSETACCOUNTNAME,OFFSETACCOUNTTYPE,OFFSETBANKCODE,OFFSETBANKNAME,OFFSETTYPE,STATUS,ENTEREDBY,ENTEREDTIMESTAMP,MODIFIEDBY,MODIFIEDTIMESTAMP,DELETEDBY,DELETEDTIMESTAMP,ORIGADDRESS,ORIGCITY,ORIGSTATE,ORIGPROVINCE,ORIGPOSTALCODE,ORIGCOUNTRY,ORIGBANKADDRESS,ORIGBANKCITY,ORIGBANKSTATE,ORIGBANKPROVINCE,ORIGBANKPOSTALCODE,ORIGBANKCOUNTRY,ORIGBANKGATEWAYOPID,ORIGBANKFXREFIND,DESTCOUNTRYCODE,DESTCURRENCYCODE,ORIGCURRENCYCODE,CORRBANKQUALIFIER1,CORRCODE1,CORRBANKNAME1,CORRADDRESS1A,CORRADDRESS1B,CORRCOUNTRY1,CORRBANKQUALIFIER2,CORRCODE2,CORRBANKNAME2,CORRADDRESS2A,CORRADDRESS2B,CORRCOUNTRY2,CORRBANKQUALIFIER3,CORRCODE3,CORRBANKNAME3,CORRADDRESS3A,CORRADDRESS3B,CORRCOUNTRY3,CORRBANKQUALIFIER4,CORRCODE4,CORRBANKNAME4,CORRADDRESS4A,CORRADDRESS4B,CORRCOUNTRY4,CORRBANKQUALIFIER5,CORRCODE5,CORRBANKNAME5,CORRADDRESS5A,CORRADDRESS5B,CORRCOUNTRY5,ORIGBANKQUALIFIER,CLEARINGSYSTEM,RETURNSACCOUNTNUM,RETURNSBANKCODE,RETURNSBANKID,RETURNSBANKNAME,TRANSACTIONTYPE,TRANCODESET,SYSFILECONTROLNUMBER,SUBMISSIONTYPE,ALL_TAX_AUTH_FLAG,NEWCHANGE,DELETEDBYUSERGROUP

achusergroup
USERGROUP,ACHMAXAPPROVALSIG,ACHCLASS,SETTLEMENTBASIS,REQUIREPREFUNDING,ACHMAXROLEAPPROVALSIG

alertclasses
TYPE,ALERTCLASS,ALERTTEXT,ALERTSUBJECT,DBCODE,LOADCLASS,OWNER

alerts
ALERTID,PRODUCT,TYPE,ALERTNAME,ALERTTYPE,USERID,USERGROUP,CHANGETIME,RECIPIENT

applicationresources
PRODUCTCODE,CODE,LOCALE,MESSAGE,OWNER

batchinstructionsauditlog
TNUM,ENTRYTYPE,USERGROUP,USERID,PRODUCT,TYPE,FUNCTIONCODE,ACTIONMODE,STATUS,STATUS_DESCRIPTION,LOGTIME,SUBTYPE,UPDATECOUNT__,INFO,NUMBER_OF_SIGNATURES,ACTIONDESCRIPTION

enterpriseaccount
BANKCODE,BANKCOUNTRYCODE,ACCOUNTNUM,CURRENCYCODE,ACCOUNTNAME,CLIENTACCOUNTNAME,USERGROUP,ACCOUNTTYPE,MODIFIEDBY,MODIFIEDBYTIMESTAMP,ENTEREDBY,ENTEREDBYTIMESTAMP,ADDRESSLINE1,ADDRESSLINE2,ADDRESSLINE3,ADDRESSLINE4,ACCOUNTFILTER,STATUS,COUNTRYCODE,TRANTYPE,IMAGEACCOUNT,DELETEDBY,DELETEDBYTIMESTAMP,BRANCHID,TRANCODESET,FUNDINGMETHOD,NEWCHANGE,DELETEDBYUSERGROUP

entitlements
USERGROUP,ROLEID,PRODUCTCODE,FUNCTIONCODE,TYPECODE,ACTIONMODE,ENTRYMETHOD,ACTIONTIMESTAMP

entitlementspergroup
USERGROUP,PRODUCTCODE,FUNCTIONCODE,TYPECODE

instructionauditlog
TNUM,BATCHTNUM,ENTRYTYPE,USERGROUP,USERID,PRODUCT,TYPE,FUNCTIONCODE,ACTIONMODE,STATUS,STATUS_DESCRIPTION,NUMBER_OF_SIGNATURES,LOGTIME,SUBTYPE,UPDATECOUNT__,INFO,ACTIONDESCRIPTION

paymentscommon
TNUM,ACCOUNTFILTER,APPROVED_BY_1,APPROVED_BY_2,APPROVED_BY_3,APPROVED_BY_4,APPROVED_BY_5,APPROVED_BY_6,APPROVED_BY_NAME_1,APPROVED_BY_NAME_2,APPROVED_BY_NAME_3,APPROVED_BY_NAME_4,APPROVED_BY_NAME_5,APPROVED_BY_NAME_6,APPROVED_BY_PANELCODE_1,APPROVED_BY_PANELCODE_2,APPROVED_BY_PANELCODE_3,APPROVED_BY_PANELCODE_4,APPROVED_BY_PANELCODE_5,APPROVED_BY_PANELCODE_6,APPROVED_TIMESTAMP_1,APPROVED_TIMESTAMP_2,APPROVED_TIMESTAMP_3,APPROVED_TIMESTAMP_4,APPROVED_TIMESTAMP_5,APPROVED_TIMESTAMP_6,APPROVED_USERGROUP_1,APPROVED_USERGROUP_2,APPROVED_USERGROUP_3,APPROVED_USERGROUP_4,APPROVED_USERGROUP_5,APPROVED_USERGROUP_6,APPROVER_REJECTION_BY,APPROVER_REJECTION_NAME,APPROVER_REJECTION_REASON,APPROVER_REJECTION_TIMESTAMP,APPROVER_REJECTION_USERGROUP,BATCHTYPEDESC,BENE_ACCOUNTENTITLEMENT,CHILDSEQUENCENUMBER,CANCELED_BY,CANCELED_BY_NAME,CANCELED_TIMESTAMP,CANCELED_USERGROUP,CLEARINGMETHOD,CLIENTCOMP_GROUPNUM,CLIENTCOMP_NAME,CREATEDFROM,CREDIT_AMOUNT,CREDIT_CURRENCY,CUSTOMER_REFERENCE,CUTOFF_TIME,DEBIT_ACCOUNT_NUMBER,DEBIT_AMOUNT,DEBIT_CURRENCY,DELETED_BY,DELETED_BY_NAME,DELETED_TIMESTAMP,DELETED_USERGROUP,DIGEST,DIGESTAUDITID,EFFECTIVEDATE,ENTERED_BY,ENTERED_BY_NAME,ENTERED_TIMESTAMP,ENTRYMETHOD,EXTENDED_STATUS,EXTRACT_TIMESTAMP,FUNCTION,IMPORTED_BY,IMPORTED_USERGROUP,IMPORTID,KEY_ID,LAST_ACTION_TIME,MACFIELD,MODIFIED_BY,MODIFIED_BY_NAME,MODIFIED_TIMESTAMP,MODIFIED_USERGROUP,NUMBER_OF_SIGNATURES,PARENTUSERGROUP,PAYMENTMETHOD,PRODUCT,PRODUCTDESC,QUICK_ENTRY_FLAG,REJECTION_BY,REJECTION_REASON,REJECTION_TIMESTAMP,REJECTION_USERGROUP,RELEASED_BY,RELEASED_BY_NAME,RELEASED_TIMESTAMP,RELEASED_USERGROUP,REPAIRED_BY,REPAIRED_BY_NAME,REPAIRED_TIMESTAMP,REPAIRED_USERGROUP,STATUS,STATUS_DESCRIPTION,TEMPLATECODEENTITLEMENT,TEMPLATESETNAME,TEMPLATETNUM,TEMPLATEUPDATECOUNT__,TOTALAMTCREDIT,TOTALAMTDEBIT,TOTALMAXAMOUNT,TRAN_DATE,TYPE,SUBTYPE,TYPE_DESCRIPTION,UNAPPROVED_BY,UNAPPROVED_BY_NAME,UNAPPROVED_TIMESTAMP,UNAPPROVED_USERGROUP,UNRELEASED_BY,UNRELEASED_BY_NAME,UNRELEASED_TIMESTAMP,UNRELEASED_USERGROUP,UPDATECOUNT__,USERGROUP,VALUE_DATE,USERGROUPSEQUENCENUMBER,TRANSACTION_AMOUNT,CHECKAPP_GROUPNUM,CHECKAPP_DESC,LASTAPPROVER

paymentscommontemplate
TNUM,ACCOUNTFILTER,ACTIVATED_BY,ACTIVATED_BY_NAME,ACTIVATED_TIMESTAMP,ACTIVATED_USERGROUP,APPROVED_BY_1,APPROVED_BY_2,APPROVED_BY_3,APPROVED_BY_4,APPROVED_BY_5,APPROVED_BY_6,APPROVED_BY_NAME_1,APPROVED_BY_NAME_2,APPROVED_BY_NAME_3,APPROVED_BY_NAME_4,APPROVED_BY_NAME_5,APPROVED_BY_NAME_6,APPROVED_TIMESTAMP_1,APPROVED_TIMESTAMP_2,APPROVED_TIMESTAMP_3,APPROVED_TIMESTAMP_4,APPROVED_TIMESTAMP_5,APPROVED_TIMESTAMP_6,APPROVED_USERGROUP_1,APPROVED_USERGROUP_2,APPROVED_USERGROUP_3,APPROVED_USERGROUP_4,APPROVED_USERGROUP_5,APPROVED_USERGROUP_6,APPROVER_REJECTION_BY,APPROVER_REJECTION_NAME,APPROVER_REJECTION_REASON,APPROVER_REJECTION_TIMESTAMP,APPROVER_REJECTION_USERGROUP,BATCHTYPEDESC,BENE_ACCOUNTENTITLEMENT,CLEARINGMETHOD,CLIENTCOMP_GROUPNUM,CLIENTCOMP_NAME,CREDIT_AMOUNT,CREDIT_CURRENCY,CUSTOMER_REFERENCE,DEACTIVATED_BY,DEACTIVATED_BY_NAME,DEACTIVATED_TIMESTAMP,DEACTIVATED_USERGROUP,DEBIT_ACCOUNT_NUMBER,DEBIT_AMOUNT,DEBIT_CURRENCY,DELETED_BY,DELETED_BY_NAME,DELETED_TIMESTAMP,DELETED_USERGROUP,DIGEST,DIGESTAUDITID,ENTERED_BY,ENTERED_BY_NAME,ENTERED_TIMESTAMP,ENTRYMETHOD,EXTENDED_STATUS,FUNCTION,IMPORTED_USERGROUP,IMPORTED_BY,IMPORTID,KEY_ID,LAST_ACTION_TIME,LAST_USED,LAST_USED_BY,LAST_USED_BY_NAME,LAST_USED_USERGROUP,MACFIELD,MODIFIED_BY,MODIFIED_BY_NAME,MODIFIED_TIMESTAMP,MODIFIED_USERGROUP,NUMBER_OF_SIGNATURES,PARENTUSERGROUP,PAYMENTMETHOD,PRODUCT,PRODUCTDESC,REJECTION_BY,REJECTION_REASON,REJECTION_TIMESTAMP,REJECTION_USERGROUP,REPAIRED_BY,REPAIRED_BY_NAME,REPAIRED_TIMESTAMP,REPAIRED_USERGROUP,RESTRICTTEMPLATE_FLAG,SCHEDULED,STATUS,STATUS_DESCRIPTION,TEMPLATECODEENTITLEMENT,TEMPLATEENTRYMETHOD,TEMPLATETNUM,TOTALAMTCREDIT,TOTALAMTDEBIT,TOTALMAXAMOUNT,TYPE,SUBTYPE,TYPE_DESCRIPTION,UNAPPROVED_BY,UNAPPROVED_BY_NAME,UNAPPROVED_TIMESTAMP,UNAPPROVED_USERGROUP,UPDATECOUNT__,USERGROUP,TRANSACTION_AMOUNT,CHECKAPP_GROUPNUM,CHECKAPP_DESC,LASTAPPROVER

productsettingsdefinedvalues
PRODUCTCODE,ENTITYTYPE,NAME,DEFINEDVALUE,DESCRIPTION,DISPLAYORDER

roles
PARENTUSERGROUP,USERGROUP,ROLEID,DESCRIPTION,STATUS,ENTEREDBY,ENTEREDBYTIMESTAMP,MODIFIEDBY,MODIFIEDBYTIMESTAMP,APPROVEDBY,APPROVEDBYTIMESTAMP,ENTEREDBYGROUP,ENTEREDBYGROUPTIMESTAMP,MODIFIEDBYGROUP,MODIFIEDBYGROUPTIMESTAMP,APPROVEDBYGROUP,APPROVEDBYGROUPTIMESTAMP,ROLETYPE,UPDATECOUNT__,SERVICEUSERGROUP

rtgs
TNUM,ACCOUNT_TYPE,AGREEMENT_FORM_SIGNED,APPROVE_FROM_GRID,APPSTATUS,AVAILABLE_BALANCE,BENE_ACCOUNT,BENE_ACCOUNT_EXTERNAL_FLAG,BENE_ACCOUNT_TYPE,BENE_ADDRESS_1,BENE_ADDRESS_2,BENE_BANK_ADDRESS_1,BENE_BANK_ADDRESS_2,BENE_BANK_CITY,BENE_BANK_CODE,BENE_BANK_COUNTRY,BENE_BANK_ID,BENE_BANK_NAME,BENE_BANK_POSTALCODE,BENE_BANK_RETRIEVED_FLAG,BENE_BANK_STATE,BENE_BANK_TYPE,BENE_CITY,BENE_COUNTRY,BENE_INSTITUTION_ID,BENE_INSTITUTION_TYPE,BENE_IS_BANK,BENE_NAME,BENE_POSTALCODE,BENE_RETRIEVED_FLAG,BENE_STATE,BULK_PAYMENT,CORRESPONDENT_ADDRESS_1,CORRESPONDENT_ADDRESS_2,CORRESPONDENT_CITY,CORRESPONDENT_COUNTRY,CORRESPONDENT_ID,CORRESPONDENT_NAME,CORRESPONDENT_POSTALCODE,CORRESPONDENT_RETRIEVED_FLAG,CORRESPONDENT_STATE,CORRESPONDENT_TYPE,CUSTOMER_ADDRESS,CUSTOMER_ADDRESS_2,CUSTOMER_CITY,CUSTOMER_ID,CUSTOMER_NAME,CUSTOMER_POSTALCODE,CUSTOMER_REQUESTMETHOD,CUSTOMER_STATE,CUSTOMER_TELNUMBER,DEBITACCOUNTEXTERNALFLAG,DEBITPARTYISINSTRUCTINGPARTY,DEBIT_ACCOUNT_TITLE,DEBIT_ASSIGNED_BY,DEBIT_ASSIGNED_BY_NAME,DEBIT_ASSIGNED_TIMESTAMP,DEBIT_ASSIGNED_USERGROUP,DEBIT_BANKNAME,DEBIT_BANK_CODE,DEBIT_COUNTRY,DEBIT_INTERNATIONALBIC,DETAILS_OF_CHARGES,ENTERED_AMOUNT_FLAG,EXCHANGERATETBD_FLAG,EXCHANGE_RATE,EXCHANGE_RATE_CONTRACTID,FIRST_CONFIRMATION_NUMBER,FIRST_CONFIRMATION_TIMESTAMP,FXREQUESTID,IMPORTID,INSTRUCTIONCODE1,INSTRUCTIONCODE2,INSTRUCTIONCODE3,INSTRUCTIONCODE4,INSTRUCTIONS_TO_BENE_BANK_1,INSTRUCTIONS_TO_BENE_BANK_2,INSTRUCTIONS_TO_BENE_BANK_3,INSTRUCTIONS_TO_BENE_BANK_4,INSTRUCTIONS_TO_BENE_BANK_5,INSTRUCTIONS_TO_BENE_BANK_6,INTERMEDIARY_ADDRESS_1,INTERMEDIARY_ADDRESS_2,INTERMEDIARY_CITY,INTERMEDIARY_COUNTRY,INTERMEDIARY_ID,INTERMEDIARY_NAME,INTERMEDIARY_POSTALCODE,INTERMEDIARY_RETRIEVED_FLAG,INTERMEDIARY_STATE,INTERMEDIARY_TYPE,MARKETCONVENTION,MESSAGE_NUMBER,MT210_FIRST_CONFIRMATION_NUM,MT210_FIRST_CONFIRMATION_TS,MT210_REJECTION_REASON,MT210_STATUS,NOTICE_TO_RECEIVE_SENT,NUMBER_BBI_LINES_LOADED,NUMBER_OBI_LINES_LOADED,NUMBER_OF_WARNINGS,OBI_TEXT_1,OBI_TEXT_2,OBI_TEXT_3,OBI_TEXT_4,ORDERPARTYISINSTITUTION,ORIGINAL_TNUM,ORIGINATOR_ADDRESS_1,ORIGINATOR_ADDRESS_2,ORIGINATOR_CITY,ORIGINATOR_COUNTRY,ORIGINATOR_ID,ORIGINATOR_ID_TYPE,ORIGINATOR_NAME,ORIGINATOR_POSTALCODE,ORIGINATOR_STATE,PRIORITY_PAYMENT,QUOTEEXPIRATION_TIMESTAMP,RATEORTRADERESULT,RATE_TRADED_BY,RATE_TRADED_BY_NAME,RATE_TRADED_TIMESTAMP,RATE_TRADED_USERGROUP,REGULATORYREPORTINGCODEWORD,REGULATORYREPORTINGLINE1,REGULATORYREPORTINGLINE2,REGULATORYREPORTINGLINE3,ROUTINGMETHOD,RTGSKEY_ID,RTGSMACFIELD,SECOND_CONFIRMATION_NUMBER,SECOND_CONFIRMATION_TIMESTAMP,SOFT_ERROR_COUNT,SPECIAL_INSTRUCTIONS,TEMPLATE_CODE,TEMPLATE_DESCRIPTION,TEMPLATE_PROTECTFIELDS,TEMPLATE_TYPE,TRADINGUSERID,TRANSACTIONSEQUENCENUMBER,TRANSACTION_AMOUNT,TRANSACTION_CURRENCY,USERDEFINEDAMOUNTFIELD_1,USERDEFINEDAMOUNTFIELD_2,USERDEFINEDAMOUNTFIELD_3,USERDEFINEDAMOUNTFIELD_4,USERDEFINEDAMOUNTFIELD_5,USERDEFINEDDATEFIELD_1,USERDEFINEDDATEFIELD_10,USERDEFINEDDATEFIELD_2,USERDEFINEDDATEFIELD_3,USERDEFINEDDATEFIELD_4,USERDEFINEDDATEFIELD_5,USERDEFINEDDATEFIELD_6,USERDEFINEDDATEFIELD_7,USERDEFINEDDATEFIELD_8,USERDEFINEDDATEFIELD_9,USERDEFINEDNUMBERFIELD_1,USERDEFINEDNUMBERFIELD_2,USERDEFINEDNUMBERFIELD_3,USERDEFINEDNUMBERFIELD_4,USERDEFINEDNUMBERFIELD_5,USERDEFINEDPOPUPFIELD_1,USERDEFINEDPOPUPFIELD_10,USERDEFINEDPOPUPFIELD_2,USERDEFINEDPOPUPFIELD_3,USERDEFINEDPOPUPFIELD_4,USERDEFINEDPOPUPFIELD_5,USERDEFINEDPOPUPFIELD_6,USERDEFINEDPOPUPFIELD_7,USERDEFINEDPOPUPFIELD_8,USERDEFINEDPOPUPFIELD_9,USERDEFINEDTEXTFIELD_1,USERDEFINEDTEXTFIELD_10,USERDEFINEDTEXTFIELD_2,USERDEFINEDTEXTFIELD_3,USERDEFINEDTEXTFIELD_4,USERDEFINEDTEXTFIELD_5,USERDEFINEDTEXTFIELD_6,USERDEFINEDTEXTFIELD_7,USERDEFINEDTEXTFIELD_8,USERDEFINEDTEXTFIELD_9,BENEBOOK_ID,BENEBOOKUPDATECOUNT__

usergroup
USERGROUP,BASECURRENCY,CONTACTNAME,CONTACTTITLE,DASHBOARD,DISABLEUG,EMAILADDRESS,ENTEREDBY,ENTEREDBYTIMESTAMP,FAXNUMBER,GMTOFFSET,GROUPADDRLINE1,GROUPADDRLINE2,GROUPADDRLINE3,GROUPNAME,GROUPLEVEL,MODIFIEDBY,MODIFIEDBYTIMESTAMP,PARENTUSERGROUP,PASSWORDEXPIRE,PAYMENTAPPROVALTYPE,PHONENUMBER,REPORTSERVERCODE,SERVICEUSERGROUP,SUPERUSERIND,TIMEOUTMINUTES,TIMEZONEID,ALLOWSELFADMINISTRATION,ADDRBOOKPURGEFLAG,ADDRBOOKPURGEINTERVALDAYS,ADDRBOOKPURGERETENTION,ADDRBOOKPURGEDATETIME,MOBILE,LOCALE,APPLICATIONSUPERUSERIND,UPDATECOUNT__,STATUS,ENTEREDBYUSERGROUP,MODIFIEDBYUSERGROUP,DELETEDBY,DELETEDBYUSERGROUP,DELETEDBYTIMESTAMP,APPROVEDBY,APPROVEDBYUSERGROUP,APPROVEDBYTIMESTAMP,LASTCHANGEBY,LASTCHANGEBYUSERGROUP,LASTCHANGEBYTIMESTAMP,PAYMENTIMPORTMETHOD

usergroupproductsettings
PRODUCTCODE,USERGROUP,NAME,VALUE

userlog
USERGROUP,USERID,STRIKES,USERACTION,LOGTIME,ACTIONMESSAGE

users
USERGROUP,USERID,PARENTUSERGROUP,PASSWORD,SALT,LANGUAGECODE,COUNTRYCODE,USERNAME,STATUS,STRIKES,ADMINISTRATOR,APPLICATIONUSER,CHANGEDATE,SESSIONID,APPROVEDBYTIMESTAMP,APPROVEDBY,ENTEREDBYTIMESTAMP,MODIFIEDBY,MODIFIEDBYTIMESTAMP,ENTEREDBY,ENTEREDBYGROUP,ENTEREDBYGROUPTIMESTAMP,MODIFIEDBYGROUP,MODIFIEDBYGROUPTIMESTAMP,APPROVEDBYGROUP,APPROVEDBYGROUPTIMESTAMP,EMAILADDRESS,SUPERUSERIND,LOCALE,UGSUPERUSERIND,APPROVERTYPE,UPDATECOUNT__,TIMEZONEID,DISABLEUSER,ACCOUNTVIEW,SERVICEUSERGROUP,USERGROUP_USERID,ENTITLEMENTUPDATETIMESTAMP,MESSAGEREAD,STATUS_DESCRIPTION,MOBILE,UGMOBILE,MOBILENOTIFICATIONS,APPLICATIONSUPERUSERIND,UGAPPLICATIONSUPERUSERIND,SSOID


=end



=begin       sample sh file for EIM
              need to force remove the existing report before running if exists
              need the script path paramertized based on the environment
              need the oracle path paramertized based on the environment
              need the usr/pass@dbi_id paramertized based on the environment

#!/bin/bash
if [ -z "$ORACLE_HOME" ]; then
export ORACLE_HOME=/opt/payables/app/srvpaydv/product/11.2.0/client_1
export PATH=$PATH:$ORACLE_HOME/bin
fi
sqlplus user_id/password@database @/opt/payablesint/queries/userlog.sql

=end

=begin        sample sql file for EIM
              need report path paramertized based on the environment

set longchunksize 200
set long 10000
set linesize 32766
set feedback off
set trimspool on
set term off
set pagesize 0
spool ../reports/userlog.csv


PROMPT USERGROUP,USERID,STRIKES,USERACTION,LOGTIME,ACTIONMESSAGE

SELECT '"' ||
           TRANSLATE (LTRIM(RTRIM(USERGROUP)), ',' || CHR(10) || CHR(13), ' ') || '","' ||
           TRANSLATE (LTRIM(RTRIM(USERID)), ','||CHR(10)||CHR(13), ' ') || '","' ||
           LTRIM(RTRIM(STRIKES)) || '","' ||
           TRANSLATE (LTRIM(RTRIM(USERACTION)), ','||CHR(10)||CHR(13), ' ') || '","' ||
           TO_CHAR(LOGTIME, 'mm/dd/yyyy HH24:MI:SS') || '","' ||
           TRANSLATE (LTRIM(RTRIM(ACTIONMESSAGE)), ','||CHR(10)||CHR(13), ' ') || '"'
FROM WEBSYSTEM.USERLOG
--Used for testing
         --where rownum < 12
         ;


spool off
exit
=end
